<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Do you like my gift, meow? ğŸ¾</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Splash Screen -->
    <div class="splash-screen" id="splashScreen">
        <div class="splash-logo">ğŸ¾</div>
        <div class="splash-text">Loading your gift...</div>
        <div class="splash-loading">
            <div class="splash-loading-bar"></div>
        </div>
    </div>

    <div id="floatingElements"></div>

    <!-- Cat Mascot -->
    <div class="cat-mascot" onclick="triggerMascot()">
        <img src="images/login-cat.gif" alt="Cat mascot">
        <div class="mascot-bubble" id="mascotBubble">
            <p id="mascotText">Meow! Click me anytime! ğŸ¾</p>
        </div>
    </div>

    <div class="container">
        <!-- Screen 1: Login -->
        <div id="loginScreen" class="screen">
            <div class="cat-gif" id="loginCat">
                <img src="images/login-cat.gif" alt="Welcome cat">
            </div>
            <h1>Hello is it you? ğŸ¾</h1>
            <p>Enter your name</p>
            <input type="text" id="nameInput" placeholder="Your name..." maxlength="20">
            <div class="error-message" id="errorMessage"></div>
            <br><br>
            <button class="btn-primary" onclick="startGame()">Enter âœ¨</button>
        </div>

        <!-- Screen 2: User Message Screen (Scrollable) -->
        <div id="messageScreen" class="screen scrollable-screen">
            <div class="screen-content">
                <div class="user-badge" id="userBadge"></div>
                
                <div class="cat-gif" id="happyCat">
                    <img src="images/happy-cat.gif" alt="Happy cat">
                </div>
                <h1>Yay! ğŸ’•</h1>
                
                <!-- Only visible for target users -->
                <div id="targetUserContent">
                    <div class="message-box">
                        <div class="typewriter" id="typewriter"></div>
                        <div id="bonusMessages"></div>
                    </div>
                    
                    <div class="redeem-section">
                        <div class="redeem-title">
                            <span>ğŸ</span>
                            <span>Got a Secret Message Code?</span>
                            <span>ğŸ</span>
                        </div>
                        <div class="redeem-input-container">
                            <input type="text" class="redeem-input" id="codeInput" placeholder="ENTER SECRET CODE" maxlength="15">
                            <button class="redeem-btn" onclick="redeemCode()">REDEEM ğŸ¯</button>
                        </div>
                        <div id="redeemMessage"></div>
                    </div>
                </div>

                <!-- Stranger message -->
                <div id="strangerContent" style="display: none;">
                    <div class="message-box">
                        <p style="color: #936fb5; font-size: 1.2em; text-align: center;">
                            Welcome! ğŸ‘‹<br><br>
                            This is made only for special user but you can explore the settings and features!<br>
                            Feel free to leave a message! ğŸ’Œ
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Admin Panel Screen (Scrollable) -->
        <div id="adminScreen" class="screen scrollable-screen">
            <div class="screen-content">
                <div class="admin-header">
                    <h1>ğŸ‘‘ Admin Panel</h1>
                    <p>Welcome, Zeus! ğŸ¾</p>
                </div>

                <div class="admin-stats">
                    <div class="stat-card">
                        <h3>Total Users</h3>
                        <div class="stat-number" id="totalUsers">0</div>
                    </div>
                    <div class="stat-card">
                        <h3>Special Users</h3>
                        <div class="stat-number" id="specialUsers">0</div>
                    </div>
                </div>

                <div class="admin-categories">
                    <button class="admin-cat-btn" onclick="showAdminSection('users')">
                        ğŸ‘¥ User List
                    </button>
                    <button class="admin-cat-btn" onclick="showAdminSection('whitelist')">
                        â­ Manage Whitelist
                    </button>
                    <button class="admin-cat-btn" onclick="showAdminSection('messages')">
                        ğŸ“¨ View Messages
                    </button>
                    <button class="admin-cat-btn" onclick="showAdminSection('send')">
                        âœ‰ï¸ Send Message
                    </button>
                    <button class="admin-cat-btn" onclick="showAdminSection('codes')">
                        ğŸ Manage Codes
                    </button>
                </div>

                <!-- Admin Sections -->
                <div id="adminUserList" class="admin-section">
                    <h2>User List</h2>
                    <div id="userListContent" class="user-list"></div>
                </div>

                <div id="adminWhitelist" class="admin-section">
                    <h2>Manage Special Users (Whitelist)</h2>
                    <div class="whitelist-form">
                        <input type="text" id="whitelistName" class="admin-input" placeholder="Username to add..." maxlength="20">
                        <button class="btn-primary" onclick="addToWhitelist()">Add to Whitelist â­</button>
                    </div>
                    <h3 style="margin-top: 20px;">Current Special Users</h3>
                    <div id="whitelistContent" class="whitelist-list"></div>
                </div>

                <div id="adminMessages" class="admin-section">
                    <h2>Guestbook Messages</h2>
                    <div id="adminMessagesContent" class="messages-list"></div>
                </div>

                <div id="adminSend" class="admin-section">
                    <h2>Send Message to User</h2>
                    <div class="send-form">
                        <label>Select Recipient:</label>
                        <select id="recipientSelect" class="admin-input">
                            <option value="all">ğŸ“¢ All Users</option>
                        </select>
                        <label>Message:</label>
                        <textarea id="adminMessageText" class="admin-input" placeholder="Write your message..." rows="5"></textarea>
                        <button class="btn-primary" onclick="sendAdminMessage()">Send Message âœ¨</button>
                    </div>
                </div>

                <div id="adminCodes" class="admin-section">
                    <h2>Manage Redeem Codes</h2>
                    <div class="code-form">
                        <input type="text" id="newCodeName" class="admin-input" placeholder="Code (e.g., HELLO2025)" maxlength="15">
                        <input type="text" id="newCodeTitle" class="admin-input" placeholder="Message Title">
                        <textarea id="newCodeContent" class="admin-input" placeholder="Secret message content..." rows="4"></textarea>
                        <button class="btn-primary" onclick="createRedeemCode()">Create Code ğŸ</button>
                    </div>
                    <div id="codesList" class="codes-list"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="heart-rain" id="fallingItems"></div>

    <!-- Sign Out Button -->
    <button class="signout-btn" id="signoutBtn" onclick="signOut()">ğŸšª</button>

    <!-- Settings Button -->
    <button class="settings-btn" id="settingsBtn" onclick="openSettings()">âš™ï¸</button>

    <!-- Settings Modal -->
    <div class="settings-modal" id="settingsModal">
        <div class="settings-content scrollable-content">
            <div class="settings-header">
                <h2>âš™ï¸ Settings</h2>
                <button class="close-settings" onclick="closeSettings()">Ã—</button>
            </div>
            
            <!-- Settings Categories -->
            <div class="settings-categories">
                <button class="setting-cat-btn" onclick="showSettingCategory('theme')">
                    ğŸ¨ Theme
                </button>
                <button class="setting-cat-btn" onclick="showSettingCategory('music')">
                    ğŸµ Music
                </button>
                <button class="setting-cat-btn" onclick="showSettingCategory('inbox')">
                    ğŸ“¬ Inbox <span id="inboxBadge" class="notification-badge">0</span>
                </button>
                <button class="setting-cat-btn" onclick="showSettingCategory('guestbook')">
                    ğŸ“© Reply
                </button>
            </div>

            <!-- Theme Settings -->
            <div id="themeSettings" class="setting-section">
                <h3>Falling Animation Theme</h3>
                <div id="themeOptions">
                    <div class="theme-option selected" onclick="changeTheme('hearts')">
                        <span class="theme-emoji">ğŸ’–</span>
                        <span class="theme-label">Hearts</span>
                    </div>
                    <div class="theme-option" onclick="changeTheme('cats')">
                        <span class="theme-emoji">ğŸ¾</span>
                        <span class="theme-label">Cat Paws</span>
                    </div>
                    <div class="theme-option" onclick="changeTheme('stars')">
                        <span class="theme-emoji">â­</span>
                        <span class="theme-label">Stars</span>
                    </div>
                    <div class="theme-option" onclick="changeTheme('flowers')">
                        <span class="theme-emoji">ğŸŒ¸</span>
                        <span class="theme-label">Flowers</span>
                    </div>
                    <div class="theme-option" onclick="changeTheme('butterflies')">
                        <span class="theme-emoji">ğŸƒ</span>
                        <span class="theme-label">Butterflies</span>
                    </div>
                </div>

                <h3 style="margin-top: 30px;">Background Color</h3>
                <div class="color-picker-section">
                    <input type="color" id="bgColorPicker" value="#936fb5">
                    <button class="btn-primary" onclick="changeBackgroundColor()">Apply Color ğŸ¨</button>
                    <button class="btn-secondary" onclick="resetBackgroundColor()">Reset to Purple ğŸ’œ</button>
                </div>
            </div>

            <!-- Music Settings -->
            <div id="musicSettings" class="setting-section" style="display: none;">
                <h3>ğŸµ Music Player</h3>
                <div class="music-controls">
                    <button class="btn-primary" onclick="toggleMusic()">
                        <span id="musicStatusText">ğŸ”‡ Play Music</span>
                    </button>
                </div>
                
                <h3 style="margin-top: 20px;">Upload Your Music</h3>
                <div class="upload-section">
                    <input type="file" id="musicUpload" accept="audio/*" style="display: none;">
                    <button class="btn-primary" onclick="document.getElementById('musicUpload').click()">
                        ğŸ“ Choose Music File
                    </button>
                    <p id="uploadStatus" style="margin-top: 10px; color: #936fb5;"></p>
                </div>

                <div class="music-info" id="musicInfo" style="display: none;">
                    <p><strong>Current Music:</strong> <span id="currentMusicName">Default Music</span></p>
                    <button class="btn-secondary" onclick="resetMusic()">ğŸ”„ Reset to Default</button>
                </div>
            </div>

            <!-- Inbox Settings -->
            <div id="inboxSettings" class="setting-section" style="display: none;">
                <h3>ğŸ“¬ Your Inbox</h3>
                <div id="inboxContent" class="inbox-list"></div>
            </div>

            <!-- Guestbook Settings -->
            <div id="guestbookSettings" class="setting-section" style="display: none;">
                <h3>ğŸ“© Reply to Zeus</h3>
                <div class="guestbook-form">
                    <div style="margin-bottom: 15px;">
                        <label style="display: block; text-align: left; color: #936fb5; font-weight: bold; margin-bottom: 5px;">Posting as:</label>
                        <input type="text" id="guestName" class="admin-input locked-input" readonly>
                    </div>
                    <textarea id="guestMessage" class="admin-input" placeholder="Write your message here..." maxlength="500" rows="4"></textarea>
                    <button class="btn-primary" onclick="addGuestbookEntry()">Submit Message ğŸ’«</button>
                </div>
                
                <h3 style="margin-top: 20px;">All Messages</h3>
                <div class="guestbook-entries" id="guestbookEntries">
                    <div class="empty-guestbook">
                        <p>ğŸ“ No messages yet. Be the first to leave one!</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Music Toggle Button -->
    <button class="music-toggle" id="musicToggle" onclick="toggleMusic()">ğŸ”‡</button>

    <!-- Developer Watermark -->
    <div class="developer-mark">
        <span>ğŸ’» Crafted with ğŸ’œ by</span>
        <a href="https://www.facebook.com/share/1BFWiXpaav/" target="_blank">Zeus</a>
        <span>ğŸ¾</span>
    </div>

    <!-- Audio Elements -->
    <audio id="clickSound" preload="auto">
        <source src="sounds/click.mp3" type="audio/mpeg">
    </audio>
    <audio id="meowSound" preload="auto">
        <source src="sounds/meow.mp3" type="audio/mpeg">
    </audio>
    <audio id="successSound" preload="auto">
        <source src="sounds/success.mp3" type="audio/mpeg">
    </audio>
    <audio id="bgMusic" loop preload="auto">
        <source src="sounds/background-music.mp3" type="audio/mpeg">
    </audio>
    <audio id="customMusic" loop preload="auto"></audio>

    <script src="script.js"></script>
</body>
</html>